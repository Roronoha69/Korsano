{"ast":null,"code":"import _regeneratorRuntime from\"/mnt/c/Users/mbodj/Downloads/treact-ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/mnt/c/Users/mbodj/Downloads/treact-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/mnt/c/Users/mbodj/Downloads/treact-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState,useEffect}from\"react\";import Stripe from'stripe';import{useAuth0}from'@auth0/auth0-react';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Success=function Success(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),backendData=_useState2[0],SetData=_useState2[1];var _useAuth=useAuth0(),user=_useAuth.user,isLoading=_useAuth.isLoading;var _useState3=useState('mbodje.justin@gmail.com'),_useState4=_slicedToArray(_useState3,2),stateEmail=_useState4[0],setEmail=_useState4[1];var test=function test(){if(!isLoading&&user){var email=user.email;setEmail(email);console.log(email);}};// Changement post a get a fait bug\nuseEffect(function(){//   fetch(\"/stripe\").then(\n//     response => response.json()\n//   ).then(\n//     data => {\n//       SetData(data)\n//     }\n//   )\nvar timer1=setTimeout(function(){return test();},2000);});var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fetch(\"/user\").then(function(response){return response.json();}).then(function(data){SetData(data);});case 1:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();var sendBack=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('https://serveur-korsano.herokuapp.com/stripe',{userEmail:\"\".concat(stateEmail)//userEmail: `mbodje.justin@gmail.com`,\n});case 2:response=_context2.sent;console.log(response.data);if(response.data=true){SetData(\"\".concat(stateEmail,\" fait parti des clients\"));}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function sendBack(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Success page\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendBack,children:\"Send Backend\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:sendBack,children:\"get data\"}),/*#__PURE__*/_jsxs(\"p\",{children:[backendData,\" \"]})]});};export default Success;","map":{"version":3,"names":["React","useState","useEffect","Stripe","useAuth0","axios","Success","backendData","SetData","user","isLoading","stateEmail","setEmail","test","email","console","log","timer1","setTimeout","fetchData","fetch","then","response","json","data","sendBack","event","post","userEmail"],"sources":["/mnt/c/Users/mbodj/Downloads/treact-ui/src/myComponents/Succes.js"],"sourcesContent":["import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Stripe from 'stripe';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nimport axios from \"axios\";\r\n\r\n\r\n\r\n\r\nconst Success = () => {\r\n\r\n const [backendData, SetData] = useState()\r\n const { user, isLoading } = useAuth0();\r\n const [stateEmail, setEmail] = useState('mbodje.justin@gmail.com')\r\n \r\nconst test = () =>{\r\n    if (!isLoading && user) {\r\n const { email } = user;\r\n setEmail(email)\r\n   console.log(email);\r\n }\r\n}\r\n\r\n// Changement post a get a fait bug\r\n\r\n  useEffect(()=>{\r\n//   fetch(\"/stripe\").then(\r\n//     response => response.json()\r\n//   ).then(\r\n//     data => {\r\n//       SetData(data)\r\n//     }\r\n//   )\r\n\r\nlet timer1 = setTimeout(() => test(), 2000);\r\n\r\n  })\r\n\r\n\r\n  const fetchData = async() =>{\r\n      fetch(\"/user\").then(\r\n    response => response.json()\r\n  ).then(\r\n    data => {\r\n      SetData(data)\r\n    }\r\n  )\r\n  }\r\n\r\n\r\nconst sendBack = async(event) => {\r\n  \r\n  \r\n    const response = await axios.post('https://serveur-korsano.herokuapp.com/stripe',\r\n    {\r\n      userEmail: `${stateEmail}`,\r\n     //userEmail: `mbodje.justin@gmail.com`,\r\n    });\r\n\r\n    \r\n    console.log(response.data);\r\n    if (response.data = true){\r\n       SetData(`${stateEmail} fait parti des clients`)\r\n    }\r\n   \r\n}\r\n\r\n    return (\r\n      <div>\r\n        <h1>Success page</h1>\r\n      \r\n\r\n        <button onClick={sendBack}>\r\n          Send Backend\r\n        </button>\r\n<br /> \r\n        <button onClick={sendBack}>\r\n          get data\r\n        </button>\r\n\r\n        <p>{backendData} </p>\r\n\r\n        \r\n      </div>\r\n    );\r\n  };\r\n  \r\n  export default Success;\r\n  "],"mappings":"oYAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,OAAP,KAAmB,QAAnB,CACA,OAASC,QAAT,KAAyB,oBAAzB,CACA,MAAOC,MAAP,KAAkB,OAAlB,C,wFAKA,GAAMC,QAAO,CAAG,QAAVA,QAAU,EAAM,CAErB,cAA+BL,QAAQ,EAAvC,wCAAOM,WAAP,eAAoBC,OAApB,eACA,aAA4BJ,QAAQ,EAApC,CAAQK,IAAR,UAAQA,IAAR,CAAcC,SAAd,UAAcA,SAAd,CACA,eAA+BT,QAAQ,CAAC,yBAAD,CAAvC,yCAAOU,UAAP,eAAmBC,QAAnB,eAED,GAAMC,KAAI,CAAG,QAAPA,KAAO,EAAK,CACd,GAAI,CAACH,SAAD,EAAcD,IAAlB,CAAwB,CAC3B,GAAQK,MAAR,CAAkBL,IAAlB,CAAQK,KAAR,CACAF,QAAQ,CAACE,KAAD,CAAR,CACEC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CACD,CAND,CAQA;AAEEZ,SAAS,CAAC,UAAI,CAChB;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,GAAIe,OAAM,CAAGC,UAAU,CAAC,iBAAML,KAAI,EAAV,EAAD,CAAe,IAAf,CAAvB,CAEG,CAXQ,CAAT,CAcA,GAAMM,UAAS,4FAAG,qIACdC,KAAK,CAAC,OAAD,CAAL,CAAeC,IAAf,CACF,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAT,EAAJ,EADN,EAEFF,IAFE,CAGF,SAAAG,IAAI,CAAI,CACNhB,OAAO,CAACgB,IAAD,CAAP,CACD,CALC,EADc,sDAAH,kBAATL,UAAS,0CAAf,CAWF,GAAMM,SAAQ,6FAAG,kBAAMC,KAAN,4JAGUrB,MAAK,CAACsB,IAAN,CAAW,8CAAX,CACvB,CACEC,SAAS,WAAKjB,UAAL,CACV;AAFD,CADuB,CAHV,QAGPW,QAHO,gBAUbP,OAAO,CAACC,GAAR,CAAYM,QAAQ,CAACE,IAArB,EACA,GAAIF,QAAQ,CAACE,IAAT,CAAgB,IAApB,CAAyB,CACtBhB,OAAO,WAAIG,UAAJ,4BAAP,CACF,CAbY,wDAAH,kBAARc,SAAQ,6CAAd,CAiBI,mBACE,oCACE,oCADF,cAIE,eAAQ,OAAO,CAAEA,QAAjB,0BAJF,cAON,aAPM,cAQE,eAAQ,OAAO,CAAEA,QAAjB,sBARF,cAYE,qBAAIlB,WAAJ,OAZF,GADF,CAkBD,CA5EH,CA8EE,cAAeD,QAAf"},"metadata":{},"sourceType":"module"}