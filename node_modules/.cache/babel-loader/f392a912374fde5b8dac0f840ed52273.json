{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/mbodj/Downloads/treact-ui/src/stripe/CheckoutForm.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { CardElement, useStripe, useElements, CardNumberElement } from '@stripe/react-stripe-js';\nimport axios from 'axios';\nimport { element } from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CheckoutForm = () => {\n  _s();\n\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const {\n      error,\n      paymentMethod\n    } = await stripe.createPaymentMethod({\n      type: 'card',\n      card: elements.getElement(CardElement)\n    });\n\n    if (!error) {\n      console.log(\"Token généré: \", paymentMethod); // envoie du token a back\n\n      try {\n        const {\n          id\n        } = paymentMethod;\n        const response = await axios.post(\"http://localhost:8080/stripe\", {\n          amount: 100,\n          id: id\n        });\n\n        if (response.data.success) {\n          console.log(\"Payment réussi\");\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    } else {\n      console.log(error.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      maxWidth: 400\n    },\n    children: [/*#__PURE__*/_jsxDEV(CardElement, {\n      options: {\n        hidePostalCode: true\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Card number\", /*#__PURE__*/_jsxDEV(CardNumberElement, {\n        options: options,\n        onReady: () => {\n          console.log(\"CardNumberElement [ready]\");\n        },\n        onChange: event => {\n          console.log(\"CardNumberElement [change]\", event);\n        },\n        onBlur: () => {\n          console.log(\"CardNumberElement [blur]\");\n        },\n        onFocus: () => {\n          console.log(\"CardNumberElement [focus]\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Expiration date\", /*#__PURE__*/_jsxDEV(CardExpiryElement, {\n        options: options,\n        onReady: () => {\n          console.log(\"CardNumberElement [ready]\");\n        },\n        onChange: event => {\n          console.log(\"CardNumberElement [change]\", event);\n        },\n        onBlur: () => {\n          console.log(\"CardNumberElement [blur]\");\n        },\n        onFocus: () => {\n          console.log(\"CardNumberElement [focus]\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"CVC\", /*#__PURE__*/_jsxDEV(CardCvcElement, {\n        options: options,\n        onReady: () => {\n          console.log(\"CardNumberElement [ready]\");\n        },\n        onChange: event => {\n          console.log(\"CardNumberElement [change]\", event);\n        },\n        onBlur: () => {\n          console.log(\"CardNumberElement [blur]\");\n        },\n        onFocus: () => {\n          console.log(\"CardNumberElement [focus]\");\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: \"payer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CheckoutForm, \"EKvoGMX7lxsZ5SGPpYu2aKFzClQ=\", false, function () {\n  return [useStripe, useElements];\n});\n\n_c = CheckoutForm;\nexport default CheckoutForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"CheckoutForm\");","map":{"version":3,"names":["React","CardElement","useStripe","useElements","CardNumberElement","axios","element","CheckoutForm","stripe","elements","handleSubmit","event","preventDefault","error","paymentMethod","createPaymentMethod","type","card","getElement","console","log","id","response","post","amount","data","success","message","maxWidth","hidePostalCode","options"],"sources":["/mnt/c/Users/mbodj/Downloads/treact-ui/src/stripe/CheckoutForm.js"],"sourcesContent":["import React from 'react';\r\nimport { CardElement, useStripe, useElements, CardNumberElement } from '@stripe/react-stripe-js';\r\nimport axios from 'axios';\r\nimport { element } from 'prop-types';\r\n \r\n\r\nconst CheckoutForm = () => {\r\n\r\n    const stripe= useStripe();\r\n    const elements = useElements();\r\n\r\n    const handleSubmit =async(event)=>{\r\n      event.preventDefault();\r\n        const {error, paymentMethod } = await stripe.createPaymentMethod({\r\n            type:'card',\r\n            card: elements.getElement(CardElement),\r\n        });\r\n        if(!error){\r\n            console.log(\"Token généré: \", paymentMethod)\r\n            // envoie du token a back\r\n            try {\r\n                const {id} = paymentMethod;\r\n                const response = await axios.post(\"http://localhost:8080/stripe\",\r\n                {\r\n                    amount: 100,\r\n                    id: id,\r\n                });\r\n                if(response.data.success){\r\n                    console.log(\"Payment réussi\");\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n        else{\r\n            console.log(error.message);\r\n        }\r\n    }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} style={{maxWidth:400}}>\r\n        <CardElement \r\n        options={{\r\n            hidePostalCode: true\r\n        }}\r\n        />\r\n    <label>\r\n        Card number\r\n        <CardNumberElement\r\n          options={options}\r\n          onReady={() => {\r\n            console.log(\"CardNumberElement [ready]\");\r\n          }}\r\n          onChange={event => {\r\n            console.log(\"CardNumberElement [change]\", event);\r\n          }}\r\n          onBlur={() => {\r\n            console.log(\"CardNumberElement [blur]\");\r\n          }}\r\n          onFocus={() => {\r\n            console.log(\"CardNumberElement [focus]\");\r\n          }}\r\n        />\r\n      </label>\r\n      <label>\r\n        Expiration date\r\n        <CardExpiryElement\r\n          options={options}\r\n          onReady={() => {\r\n            console.log(\"CardNumberElement [ready]\");\r\n          }}\r\n          onChange={event => {\r\n            console.log(\"CardNumberElement [change]\", event);\r\n          }}\r\n          onBlur={() => {\r\n            console.log(\"CardNumberElement [blur]\");\r\n          }}\r\n          onFocus={() => {\r\n            console.log(\"CardNumberElement [focus]\");\r\n          }}\r\n        />\r\n      </label>\r\n      <label>\r\n        CVC\r\n        <CardCvcElement\r\n          options={options}\r\n          onReady={() => {\r\n            console.log(\"CardNumberElement [ready]\");\r\n          }}\r\n          onChange={event => {\r\n            console.log(\"CardNumberElement [change]\", event);\r\n          }}\r\n          onBlur={() => {\r\n            console.log(\"CardNumberElement [blur]\");\r\n          }}\r\n          onFocus={() => {\r\n            console.log(\"CardNumberElement [focus]\");\r\n          }}\r\n        />\r\n      </label>\r\n\r\n        <button>\r\n            payer\r\n        </button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default CheckoutForm"],"mappings":"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"},"metadata":{},"sourceType":"module"}